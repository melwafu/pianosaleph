import{j as e,r as o,m as L}from"./app-CAXv3lmr.js";import{A as T}from"./AdminLayout-DHiddA7j.js";import{m as _}from"./Helper-G80S9ysV.js";import{S as D}from"./react-select.esm-IHxL0RGx.js";import{T as F,P as O}from"./Pagination-CfiENpqU.js";import"./Dropdown-BTfCS1U2.js";import"./transition-DlapnkkC.js";import"./use-server-handoff-complete-BfVYpOXC.js";import"./index-4kJY-3KD.js";import"./floating-ui.dom-80UF8ZUd.js";function M(n,d){var y;const s=_("crud-modal"),[x,u]=o.useState(!1),[m,p]=o.useState(n),[j,g]=o.useState(null),[b,a]=o.useState({show:!1,type:"",message:""}),{data:l,setData:i,post:f,put:v,errors:h,processing:k}=L({id:0,product_id:"",product_name:"",quantity:""});o.useEffect(()=>{x&&(p(n),u(!1))},[x]);function c(){i({id:0,product_id:0,product_name:"",quantity:""}),g({value:null,label:"Select..."})}function w(t){t.preventDefault(),f("/inventories/search",{preserveScroll:!0,resetOnSuccess:!1,onSuccess:r=>{r.props.flash.data!==null&&p(r.props.flash.data)}})}function N(t){t.preventDefault(),f("/inventories",{preserveScroll:!0,resetOnSuccess:!1,onSuccess:r=>{r.props.flash.success!==null?(s.hide(),a({show:!0,type:"success",message:r.props.flash.success}),u(!0),c()):r.props.flash.error!==null&&a({show:!0,type:"error",message:r.props.flash.error})}})}function S(t){t.preventDefault(),v(`/inventories/${l.id}`,{preserveScroll:!0,resetOnSuccess:!1,onSuccess:r=>{r.props.flash.succes!==null?(s.hide(),a({show:!0,type:"success",message:r.props.flash.success}),u(!0),c()):r.props.flash.error!==null&&a({show:!0,type:"error",message:r.props.flash.error})}})}function q(){c(),s.show()}function C(){c(),s.hide()}function P(t){i(r=>({...r,product_id:t.value,product_name:t.label})),g(t)}return e.jsxs(e.Fragment,{children:[b.show&&e.jsx(F,{toast:b,setToast:a}),e.jsxs("div",{className:"container",children:[e.jsx("button",{className:"block inline-flex text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-md text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",type:"button",onClick:()=>q(),children:"Create"}),e.jsx("div",{id:"crud-modal",tabIndex:"-1",className:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full",children:e.jsx("div",{className:"relative p-4 w-full max-w-md max-h-full",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow dark:bg-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:l.id>0?"Edit Product":"Product"}),e.jsxs("button",{type:"button",className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>C(),children:[e.jsx("svg",{className:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),e.jsx("span",{className:"sr-only",children:"Close modal"})]})]}),e.jsxs("form",{className:"p-4 md:p-5",onSubmit:l.id>0?S:N,children:[e.jsxs("div",{className:"grid gap-4 mb-4 grid-cols-2",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"product",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Product"}),e.jsx(D,{value:j,onChange:t=>P(t),options:d}),h.product_id&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:"The product field is required."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{htmlFor:"quantity",className:"block mb-2 text-sm font-medium text-gray-900 dark:text-white",children:"Quantity"}),e.jsx("input",{type:"number",name:"quantity",id:"quantity",className:"border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-600 dark:border-gray-500 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500",placeholder:"Product Quantity",value:l.quantity,onChange:t=>i("quantity",t.target.value)}),h.quantity&&e.jsx("p",{className:"mt-2 text-sm text-red-600 dark:text-red-500",children:h.quantity})]})]}),e.jsx("button",{type:"submit",className:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",disabled:k,children:l.id>0?"Update":e.jsx(e.Fragment,{children:"Save"})})]})]})})})]}),e.jsxs("div",{className:"container mt-5",children:[e.jsxs("div",{className:"pb-4",children:[e.jsx("label",{htmlFor:"table-search",className:"sr-only",children:"Search"}),e.jsx("div",{className:"relative mt-1",children:e.jsxs("form",{onSubmit:w,children:[e.jsx("div",{className:"absolute inset-y-0 rtl:inset-r-0 start-0 flex items-center ps-3 pointer-events-none",children:e.jsx("button",{type:"submit",children:e.jsx("svg",{className:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20",children:e.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"})})})}),e.jsx("input",{type:"text",id:"table-search",className:"block pt-2 ps-10 text-sm text-gray-900 bg-white border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search for items",onChange:t=>i("name",t.target.value)})]})})]}),e.jsx("div",{className:"relative overflow-x-auto shadow-md sm:rounded-lg",children:e.jsxs("table",{className:"w-full text-sm text-left rtl:text-right text-gray-500 dark:text-gray-400",children:[e.jsx("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3",children:"Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Quantity"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Unit Price"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-right",children:"Total Price"})]})}),e.jsx("tbody",{children:m.data&&((y=m.data)==null?void 0:y.map(t=>e.jsxs("tr",{className:"bg-white border-b dark:bg-gray-800 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white",children:t.name}),e.jsx("td",{className:"px-6 py-4 text-right",children:t.quantity}),e.jsx("td",{className:"px-6 py-4 text-right",children:Number(t.price).toLocaleString("en-US",{style:"currency",currency:"PHP"})}),e.jsx("td",{className:"px-6 py-4 text-right",children:Number(t.quantity*t.price).toLocaleString("en-US",{style:"currency",currency:"PHP"})})]},t.id)))})]})}),e.jsx(O,{links:m.links})]})]})}function z({inventories:n,products:d}){const s=M(n,d);return e.jsx(T,{head:"Inventories",children:s})}export{z as default};
